"use strict";function EventEmitter(){this.listeners={},this.maxListener=50}function postToRise(e){console.log("sdk data:",e),e&&e.behavior&&window.parent.postMessage&&window.parent.postMessage(e,"*")}EventEmitter.prototype.on=function(e,t){var i=this.listeners;if(i[e]&&i[e].length>=this.maxListener)throw console.error("监听器的最大数量是%d,您已超出限制",this.maxListener);i[e]instanceof Array?-1===i[e].indexOf(t)&&i[e].push(t):i[e]=[].concat(t)},EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),this.listeners[e].forEach(function(e){e.apply(null,t)})},EventEmitter.prototype.listeners=function(e){return this.listeners[e]},EventEmitter.prototype.setMaxListeners=function(e){this.maxListener=e},EventEmitter.prototype.removeListener=function(e,t){var i=this.listeners,n=(i[e]||[]).indexOf(t);0<=n&&i[e].splice(n,1)},EventEmitter.prototype.removeAllListener=function(e){this.listeners[e]=[]},EventEmitter.prototype.once=function(i,n){var r=this;this.on(i,function e(){var t=Array.prototype.slice.call(arguments);n.apply(null,t),r.removeListener(i,e)})};var bufferMap=new Map,fastTimerDelay=100,fastTimer=setInterval(function(){0<bufferMap.size&&bufferMap.forEach(function(e,t){postToRise(e),bufferMap.delete(t)})},fastTimerDelay);window.callRiseIframe=function(e){e.interval?bufferMap.set(e.behavior,e):e.waitOn&&0<e.waitOn.length?setTimeout(function(){postToRise(e)},fastTimerDelay+1):postToRise(e)},window.riseObserver=new EventEmitter,window.addEventListener("message",function(e){var t=e.data;t&&t.behavior&&riseObserver.emit(t.behavior,t)});